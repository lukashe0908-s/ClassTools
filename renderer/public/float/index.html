<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Floating</title>
    <link href="/float/lib/font/index.css" rel="stylesheet" />
    <link rel="stylesheet" href="/float/lib/mdui/mdui.css" />
    <link rel="stylesheet" href="/float/index.css" />
  </head>

  <body>
    <div id="app-tool">
      <div style="display: flex; gap: 4px">
        <mdui-chip elevated onclick="window.ipc.send('settings-window')" class="text">
          <mdui-icon name="settings"></mdui-icon>
        </mdui-chip>
        <mdui-chip elevated onclick="location.reload()" id="refresh-window" class="text">
          <mdui-icon name="refresh"></mdui-icon>
        </mdui-chip>
        <mdui-chip elevated style="margin-left: auto" id="close-window" class="text">
          <mdui-icon name="close"></mdui-icon>
        </mdui-chip>
      </div>

      <div style="display: flex; gap: 4px" class="put_away">
        <mdui-chip elevated style="width: 100%; padding: 0; margin-top: 4px; text-align: center" id="change-content-state">
          <div class="text">
            <mdui-icon name="arrow_downward"></mdui-icon>
            展开
          </div>
        </mdui-chip>
        <mdui-chip onclick="location.href='/home'" elevated style="width: 50%; padding: 0; margin-top: 4px; text-align: center">
          Dev
        </mdui-chip>
      </div>
    </div>
    <div id="app-main" class="scrollbar-hide">
      <div class="content">
        <!-- 课程表 -->
        <div class="class-list"></div>
        <span style="font-size: 16px; display: flex; align-items: center; flex-wrap: wrap">
          * Edition:
          <b>Legacy</b>
          <mdui-checkbox style="scale: 0.8" id="PicListController" checked></mdui-checkbox>
        </span>
        <div
          style="
            max-width: 100%;
            max-height: 50vh;
            display: flex;
            flex-direction: column;
            gap: 10vh;
            aspect-ratio: 4/3;
            overflow: auto;
            scroll-snap-type: y mandatory;
          "
          id="PicList"
          class="scrollbar-hide"
        >
          <div></div>
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2f3d04ed5fd3248a6a8e1365ec16609f3.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="VsCode"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2859b9667281f4d6bac7869cd7824a73c.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="VisualStudioLogoShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v272bd00f1e5f34e1397d947e53acf2c2a.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="GodotLogoShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2855b2887b1864ff4a47bada3022d1072.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="intelliJShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2f0ac68bd17674e0086b5cb625344af12.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="DockerLogoShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v247620095d19a472cb7640066eb30e6de.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="kubernetesLogoShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2c48990ce5a094c8ba92995e6229d1383.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="NeovimShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2993e90829c5d492da1e3ba5834e0f6a0.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="PaperMCLogoShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v277df1d6793144a99852501b716ae5551.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="BunLogoShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v24d92f3bfaf2d4442afbceb18922f2300.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="ElysiaJSLogoShadowed"
          />
          <div style="max-width: 100%; scroll-snap-align: center">
            <div
              style="
                width: 100%;
                aspect-ratio: 8/6;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 1.25rem;
                flex-direction: column;
                text-align: center;
              "
            >
              Weather data source:
              <br />
              <br />
              Qweather
            </div>
          </div>
          <div></div>
        </div>
      </div>
    </div>
    <div id="tool-bar" style="border-radius: 12px">
      <mdui-dropdown placement="top">
        <mdui-button slot="trigger" variant="tonal" style="width: 100%">
          <div class="text">
            <mdui-icon name="power_settings_new"></mdui-icon>
          </div>
        </mdui-button>
        <mdui-menu>
          <mdui-menu-item id="shutdown-sys" style="text-align: center">确认</mdui-menu-item>
        </mdui-menu>
      </mdui-dropdown>
      <div
        id="weather"
        style="
          display: flex;
          align-items: center;
          font-size: 16px;
          white-space: pre;
          text-align: center;
          background-color: #228acb;
          color: white;
          padding-left: 6px;
          padding-right: 6px;
          user-select: none;
          cursor: pointer;
        "
        class="transition-all"
      >
        --°
      </div>
    </div>
  </body>
  <script src="/float/lib/mdui/mdui.global.js"></script>
  <script src="/float/lib/loadsh.min.js"></script>
  <script src="/float/lib/dayjs.min.js"></script>
  <script src="/float/index.js"></script>
  <script src="/float/penetrate.js"></script>
  <script src="/float/weather.js"></script>
  <script>
    mdui.setColorScheme('#4f8ac4');
    if (localStorage.getItem('desktop-tool/hiddenPicList')) {
      document.querySelector('#PicList').style.display = 'none';
      document.querySelector('#PicListController').removeAttribute('checked');
    }
    document.querySelector('#PicListController').addEventListener('change', event => {
      event.target.checked
        ? localStorage.removeItem('desktop-tool/hiddenPicList') || (document.querySelector('#PicList').style.display = 'flex')
        : localStorage.setItem('desktop-tool/hiddenPicList', true) || (document.querySelector('#PicList').style.display = 'none');
    });
    localStorage.getItem('desktop-tool/scrollPicList') &&
      (document.querySelector('#PicList').scrollTop = localStorage.getItem('desktop-tool/scrollPicList'));
    document.querySelector('#PicList').addEventListener(
      'scroll',
      _.throttle(event => {
        // console.log(event.target.scrollTop);
        if (event.target.scrollTop >= 100) {
          localStorage.setItem('desktop-tool/scrollPicList', event.target.scrollTop);
        } else {
          localStorage.removeItem('desktop-tool/scrollPicList');
        }
      }, 500)
    );
  </script>
</html>
