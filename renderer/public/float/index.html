<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Floating</title>
    <link rel="stylesheet" href="/float/mdui/css/mdui.min.css" />
    <link rel="stylesheet" href="/float/mdui/mdui.css" />
    <link rel="stylesheet" href="/float/index.css" />
  </head>

  <body>
    <div id="app-tool">
      <div style="display: flex; gap: 4px">
        <mdui-chip elevated onclick="window.ipc.send('settings-window')">
          <i class="mdui-icon material-icons">settings</i>
        </mdui-chip>
        <mdui-chip elevated onclick="location.reload()" id="refresh-window">
          <i class="mdui-icon material-icons">refresh</i>
        </mdui-chip>
        <mdui-chip elevated style="margin-left: auto" id="close-window">
          <i class="mdui-icon material-icons">close</i>
        </mdui-chip>
      </div>

      <div style="display: flex; gap: 4px" class="put_away">
        <mdui-chip elevated style="width: 100%; padding: 0; margin-top: 4px; text-align: center" id="change-content-state">
          <div class="text">
            <i class="mdui-icon material-icons">arrow_downward</i>
            展开
          </div>
        </mdui-chip>
        <mdui-chip onclick="location.href='/home'" elevated style="width: 50%; padding: 0; margin-top: 4px; text-align: center">
          Go Modern
        </mdui-chip>
      </div>
    </div>
    <div id="app-main" class="scrollbar-hide">
      <div class="content">
        <!-- 课程表 -->
        <div class="class-list"></div>
        <span style="font-size: 16px; display: flex; align-items: center">
          * Edition:
          <b>Legacy</b>
          <mdui-checkbox style="scale: 0.8" id="PicListController" checked></mdui-checkbox>
        </span>
        <div
          style="
            max-width: 100%;
            max-height: 50vh;
            display: flex;
            flex-direction: column;
            gap: 10vh;
            aspect-ratio: 8/6;
            overflow: auto;
            scroll-snap-type: y mandatory;
          "
          id="PicList"
          class="scrollbar-hide"
        >
          <div></div>
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2f3d04ed5fd3248a6a8e1365ec16609f3.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="VsCode"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v272bd00f1e5f34e1397d947e53acf2c2a.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="GodotLogoShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2855b2887b1864ff4a47bada3022d1072.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="intelliJShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v247620095d19a472cb7640066eb30e6de.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="kubernetesLogoShadow"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2c48990ce5a094c8ba92995e6229d1383.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="NeovimShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v2993e90829c5d492da1e3ba5834e0f6a0.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="PaperMCLogoShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v277df1d6793144a99852501b716ae5551.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="BunLogoShadowed"
          />
          <img
            src="https://pic4.58cdn.com.cn/nowater/c06b291b-19e4-4325-b750-0ab40e9579c3/n_v24d92f3bfaf2d4442afbceb18922f2300.png"
            style="max-width: 100%; scroll-snap-align: center"
            referrerpolicy="no-referrer"
            draggable="false"
            alt="ElysiaJSLogoShadowed"
          />
          <div style="max-width: 100%; scroll-snap-align: center">
            <div
              style="
                width: 100%;
                aspect-ratio: 8/6;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 1.25rem;
                flex-direction: column;
              "
            >
              滚动测试
            </div>
          </div>
          <div></div>
        </div>
      </div>
    </div>
    <div id="tool-bar">
      <mdui-dropdown placement="top">
        <mdui-button slot="trigger" variant="tonal" full-width style="border-radius: 10000vmax">
          <mdui-icon name="adjust"></mdui-icon>
          关机
        </mdui-button>
        <mdui-menu>
          <mdui-menu-item id="shutdown-sys" style="text-align: center">确认</mdui-menu-item>
        </mdui-menu>
      </mdui-dropdown>
    </div>
  </body>
  <script src="/float/mdui/js/mdui.min.js"></script>
  <script src="/float/mdui/mdui.global.js"></script>
  <script src="/float/loadsh.min.js"></script>
  <script src="/float/dayjs.min.js"></script>
  <script src="/float/index.js"></script>
  <script src="/float/penetrate.js"></script>
  <script>
    mdui.setColorScheme('#4f8ac4');
    if (localStorage.getItem('desktop-tool/hiddenPicList')) {
      document.querySelector('#PicList').style.display = 'none';
      document.querySelector('#PicListController').removeAttribute('checked');
    }
    document.querySelector('#PicListController').addEventListener('change', event => {
      event.target.checked
        ? localStorage.removeItem('desktop-tool/hiddenPicList') || (document.querySelector('#PicList').style.display = 'flex')
        : localStorage.setItem('desktop-tool/hiddenPicList', true) || (document.querySelector('#PicList').style.display = 'none');
    });
    localStorage.getItem('desktop-tool/scrollPicList') &&
      (document.querySelector('#PicList').scrollTop = localStorage.getItem('desktop-tool/scrollPicList'));
    document.querySelector('#PicList').addEventListener(
      'scroll',
      throttle(event => {
        // console.log(event.target.scrollTop);
        if (event.target.scrollTop >= 100) {
          localStorage.setItem('desktop-tool/scrollPicList', event.target.scrollTop);
        } else {
          localStorage.removeItem('desktop-tool/scrollPicList');
        }
      }, 500)
    );

    function throttle(func, wait = 0) {
      let timer;
      let result;
      return function (...args) {
        if (!timer) {
          timer = setTimeout(() => {
            result = func.apply(this, args);
            timer = undefined;
          }, wait);
        }
        return result;
      };
    }
  </script>
</html>
